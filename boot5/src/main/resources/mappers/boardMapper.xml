<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="global.sesoc.boot.dao.BoardDAO">

	<!-- 게시글 등록 -->
	<insert id="write" parameterType="Board">
		INSERT INTO cm_board 
		VALUES
			(boardnum_seq.nextval, #{userid}, #{title}, #{content}, sysdate, #{filenum}, #{shared}) 
	</insert>
	
	<!-- 글 목록(개인) -->
	<select id="boardList" parameterType="string" resultType="Board">
		SELECT * FROM cm_board
		WHERE
			USERID = #{userid}
	</select>
	
	<!-- 글 목록(전체) -->
	<select id="list" resultType="Board">
		SELECT * FROM cm_board
	</select>
	
	<!-- 글 수정 -->
	<update id="updateBoard" parameterType="Board">
		UPDATE cm_board
		SET
			title = #{title}, content = #{cotent}, shared = #{shared}
		WHERE
			boardnum = #{boardnum} and userid = #{userid}
	</update>
	
	<!-- 글 삭제 -->
	<delete id="deleteBoard" parameterType="int">
		DELETE cm_board
		WHERE
			boardnum = #{boardnum}
	</delete>
	
	<!-- 글 검색 ? -->
	<select id="searchBoard" parameterType="String" resultType="Board">
	
	</select>
	
	<!-- 댓글 등록 -->
	<insert id="writeReply" parameterType="Reply">
		INSERT INTO cm_reply
		VALUES
			(replynum_seq, #{boardnum}, #{userid}, #{replytext}, sysdate)
	</insert>
	
	<!-- 댓글 수정 -->
	<update id="updateReply" parameterType="Reply">
		UPDATE cm_reply
		SET
			replytext = #{replytext}
		WHERE
			replynum = #{replynum}
	</update>
	
	<!-- 댓글 삭제 -->
	<delete id="deleteReply" parameterType="int">
		DELETE cm_reply
		WHERE
			replynum = #{replynum}
	</delete>
	
	<!-- 좋아요 등록 -->
	<insert id="like" parameterType="Like">
		INSERT INTO cm_like
		VALUES
			(#{boardnum}, #{userid}, #{like_userid})
	</insert>
	
	<!-- 좋아요 리스트(랭킹) ? -->
	<select id="rankList" resultType="Like">
	
	</select>
	
	<!-- 좋아요 리스트(개인) -->
	<select id="idList" parameterType="String" resultType="Like">
		SELECT * FROM cm_like
		WHERE
			userid = #{userid}
	</select>
	
	<!-- 좋아요 리스트 ? -->
	<select id="likeList" resultType="Like">
	
	</select>
	          
	<!-- 구독 -->
	<insert id="writeSubscribe" parameterType="Subscribe">
		INSERT INTO cm_subscribe
		VALUES
			(#{userid}, #{sub_userid})
	</insert>
	
	<!-- 구독 리스트 -->
	<select id="subscribeList" parameterType="String" resultType="Subscribe">
		SELECT * FROM cm_subscribe
		WHERE
			userid = #{userid}
	</select>
</mapper>